#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
import json
import re

def is_ascii(s):
    return all(ord(c) < 128 for c in s)

if len(sys.argv) != 2:
    print "Please provide the name of the file to be analyzed."
    sys.exit()

file_name = sys.argv[1]
eng_file = file_name + "_eng"
uni_file = file_name + "_uni"

json_data = open(file_name, 'r')
eng_f = open(eng_file, 'w')
uni_f = open(uni_file, 'w')

data = json.load(json_data)

for status in data['data']:
    msg = status['message']
    if is_ascii(msg) == False:
        msg = msg.replace(u'，', ',')
        msg = msg.replace(u'。', '.')
        msg = msg.replace(u'《', '<')
        msg = msg.replace(u'》', '>')
        msg = msg.replace(u'：', ':')
        msg = msg.replace(u'；', ';')
        msg = msg.replace(u'“', '"')
        msg = msg.replace(u'‘', '\'')
        msg = msg.replace(u'”', '"')
        msg = msg.replace(u'’', '\'')
        msg = msg.replace(u'【', '[')
        msg = msg.replace(u'】', ']')
        msg = msg.replace(u'『', '{')
        msg = msg.replace(u'』', '}')
        msg = msg.replace(u'～', '~')
        msg = msg.replace(u'！', '!')
        msg = msg.replace(u'？', '?')
        msg = msg.replace(u'（', '(')
        msg = msg.replace(u'）', ')')
        
    for sentence in re.split('!|\?|\.|\n', msg):
        if len(sentence) > 0:
            if is_ascii(sentence):
                eng_f.write(sentence + '\n')
                print 'ENG: ' + sentence
            else:
                uni_f.write(sentence.encode('utf8') + '\n')
                print 'UNI: ' + sentence
eng_f.close()
uni_f.close()
